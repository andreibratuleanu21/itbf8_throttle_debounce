{"version":3,"sources":["index.js"],"names":["counter","setInterval","document","querySelector","textContent","socket","WebSocket","processMoveEv","ev","send","x","y","addEventListener","window","requestAnimationFrame","debounce","func","delay","timeoutId","context","args","arguments","clearTimeout","setTimeout","apply","throttle","limit","inThrottle","onmessage","event","data","split","element","style","left","top","newElement","createElement","id","position","display","width","height","background","Math","random","toString","substr","appendChild"],"mappings":"AAAA,IAAIA,OAAO,GAAG,CAAd;AACAC,WAAW,CAAC,YAAY;AACtBC,EAAAA,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmCC,WAAnC,GAAiDJ,OAAjD;AACD,CAFU,EAER,GAFQ,CAAX;AAIA,IAAMK,MAAM,GAAG,IAAIC,SAAJ,CAAc,qBAAd,CAAf,EAEA;AACA;AACA;AACA;AACA;;AAEA,SAASC,aAAT,CAAuBC,EAAvB,EAA2B;AACzBH,EAAAA,MAAM,CAACI,IAAP,WAAeD,EAAE,CAACE,CAAlB,cAAuBF,EAAE,CAACG,CAAH,GAAO,EAA9B;AACAX,EAAAA,OAAO;AACR;;AAEDE,QAAQ,CAACC,aAAT,CAAuB,UAAvB,EAAmCS,gBAAnC,CAAoD,WAApD,EAAiE,UAACJ,EAAD,EAAQ;AACvEK,EAAAA,MAAM,CAACC,qBAAP,CAA6B;AAAA,WAAMP,aAAa,CAACC,EAAD,CAAnB;AAAA,GAA7B;AACD,CAFD,GAIA;AACA;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;;AACA,SAASO,QAAT,CAAkBC,IAAlB,EAAwBC,KAAxB,EAA+B;AAC7B,MAAIC,SAAJ;AACA,SAAO,YAAW;AAChB,QAAMC,OAAO,GAAG,IAAhB;AACA,QAAMC,IAAI,GAAGC,SAAb;AACAC,IAAAA,YAAY,CAACJ,SAAD,CAAZ;AACAA,IAAAA,SAAS,GAAGK,UAAU,CAAC;AAAA,aAAMP,IAAI,CAACQ,KAAL,CAAWL,OAAX,EAAoBC,IAApB,CAAN;AAAA,KAAD,EAAkCH,KAAlC,CAAtB;AACD,GALD;AAMD;;AAAA;;AAED,SAASQ,QAAT,CAAkBT,IAAlB,EAAwBU,KAAxB,EAA+B;AAC7B,MAAIC,UAAJ;AACA,SAAO,YAAW;AAChB,QAAMP,IAAI,GAAGC,SAAb;AACA,QAAMF,OAAO,GAAG,IAAhB;;AACA,QAAI,CAACQ,UAAL,EAAiB;AACfX,MAAAA,IAAI,CAACQ,KAAL,CAAWL,OAAX,EAAoBC,IAApB;AACAO,MAAAA,UAAU,GAAG,IAAb;AACAJ,MAAAA,UAAU,CAAC;AAAA,eAAMI,UAAU,GAAG,KAAnB;AAAA,OAAD,EAA2BD,KAA3B,CAAV;AACD;AACF,GARD;AASD;;AAAA;;AAEDrB,MAAM,CAACuB,SAAP,GAAmB,UAAUC,KAAV,EAAiB;AAClC;AACA,MAAMC,IAAI,GAAGD,KAAK,CAACC,IAAN,CAAWC,KAAX,CAAiB,GAAjB,CAAb;AACA,MAAMC,OAAO,GAAG9B,QAAQ,CAACC,aAAT,uBAAsC2B,IAAI,CAAC,CAAD,CAA1C,EAAhB;;AACA,MAAIE,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACC,KAAR,CAAcC,IAAd,aAAwBJ,IAAI,CAAC,CAAD,CAA5B;AACAE,IAAAA,OAAO,CAACC,KAAR,CAAcE,GAAd,aAAuBL,IAAI,CAAC,CAAD,CAA3B;AACD,GAHD,MAGO;AACL,QAAMM,UAAU,GAAGlC,QAAQ,CAACmC,aAAT,CAAuB,KAAvB,CAAnB;AACAD,IAAAA,UAAU,CAACE,EAAX,GAAgBR,IAAI,CAAC,CAAD,CAApB;AACAM,IAAAA,UAAU,CAACH,KAAX,CAAiBM,QAAjB,GAA4B,UAA5B;AACAH,IAAAA,UAAU,CAACH,KAAX,CAAiBO,OAAjB,GAA2B,OAA3B;AACAJ,IAAAA,UAAU,CAACH,KAAX,CAAiBQ,KAAjB,GAAyB,MAAzB;AACAL,IAAAA,UAAU,CAACH,KAAX,CAAiBS,MAAjB,GAA0B,MAA1B;AACAN,IAAAA,UAAU,CAACH,KAAX,CAAiBU,UAAjB,GAA8B,MAAIC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAoC,CAApC,CAAlC;AACAX,IAAAA,UAAU,CAACH,KAAX,CAAiBC,IAAjB,aAA2BJ,IAAI,CAAC,CAAD,CAA/B;AACAM,IAAAA,UAAU,CAACH,KAAX,CAAiBE,GAAjB,aAA0BL,IAAI,CAAC,CAAD,CAA9B;AACA5B,IAAAA,QAAQ,CAACC,aAAT,aAAmC6C,WAAnC,CAA+CZ,UAA/C;AACD;AACF,CAnBD","file":"demo.e31bb0bc.js","sourceRoot":"..","sourcesContent":["let counter = 0;\nsetInterval(function () {\n  document.querySelector('#counter').textContent = counter;\n}, 500);\n\nconst socket = new WebSocket('ws://localhost:8080');\n\n// RAW MOVE EV\n// document.querySelector('#content').addEventListener('mousemove', function(event) {\n//  socket.send(`${event.x}:${event.y - 80}`);\n//  counter++;\n// });\n\nfunction processMoveEv(ev) {\n  socket.send(`${ev.x}:${ev.y - 80}`);\n  counter++;\n}\n\ndocument.querySelector('#content').addEventListener('mousemove', (ev) => {\n  window.requestAnimationFrame(() => processMoveEv(ev));\n});\n\n// Throttled MOVE EV\n// document.querySelector('#content').addEventListener('mousemove', throttle(processMoveEv, 200));\n\n// Debounced MOVE EV\n/*\n * This will not work because we create a new instance of debounce(processMoveEv, 1000) each time. And each instance will complete after 1 sec.\ndocument.querySelector('#content').addEventListener('mousemove', function(event) {\n  debounce(processMoveEv, 1000)(event);\n});\n\nInstead do this\n\nconst debouncedProcess(processMoveEv, 1000);\n\ndocument.querySelector('#content').addEventListener('mousemove', function(event) {\n  debouncedProcess(event);\n});\n*/\n\n// document.querySelector('#content').addEventListener('mousemove', debounce(processMoveEv, 500));\n\n\n// Debounce & Throttle\nfunction debounce(func, delay) {\n  var timeoutId\n  return function() {\n    const context = this;\n    const args = arguments;\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func.apply(context, args), delay);\n  };\n};\n\nfunction throttle(func, limit) {\n  var inThrottle;\n  return function() {\n    const args = arguments;\n    const context = this;\n    if (!inThrottle) {\n      func.apply(context, args);\n      inThrottle = true;\n      setTimeout(() => inThrottle = false, limit);\n    }\n  };\n};\n\nsocket.onmessage = function (event) {\n  // an id : x : y;\n  const data = event.data.split(':');\n  const element = document.querySelector(`#content > #${data[0]}`);\n  if (element) {\n    element.style.left = `${data[1]}px`;\n    element.style.top = `${data[2]}px`;\n  } else {\n    const newElement = document.createElement(\"div\");\n    newElement.id = data[0];\n    newElement.style.position = 'absolute';\n    newElement.style.display = 'block';\n    newElement.style.width = '16px';\n    newElement.style.height = '16px';\n    newElement.style.background = '#'+Math.random().toString(16).substr(2,6);\n    newElement.style.left = `${data[1]}px`;\n    newElement.style.top = `${data[2]}px`;\n    document.querySelector(`#content`).appendChild(newElement);\n  }\n};\n"]}